# Data Dictionary

## Overview

This document defines all fields, data types, formats, and meanings for data in the pdoom-data repository.

## Funding Data Schema

### Core Fields

#### grant_id
- **Type**: String
- **Required**: Yes
- **Description**: Unique identifier for the grant
- **Format**: Alphanumeric, may include hyphens or underscores
- **Example**: `SFF-2024-001`, `OP-AI-2023-42`
- **Constraints**: Must be unique within source
- **Notes**: Generated by funding source, not modified

#### amount
- **Type**: Number (Integer or Float)
- **Required**: Yes
- **Description**: Grant amount in US Dollars
- **Format**: Numeric value without currency symbols
- **Example**: `50000`, `125000.50`
- **Constraints**: Must be >= 0
- **Notes**: Convert all currencies to USD at time of grant

#### date
- **Type**: String
- **Required**: Yes
- **Description**: Date when grant was awarded or announced
- **Format**: ISO 8601 (YYYY-MM-DD)
- **Example**: `2024-03-15`, `2023-11-01`
- **Constraints**: Must be valid date, not in future
- **Notes**: Use announcement date if award date unknown

#### source
- **Type**: String (Enum)
- **Required**: Yes
- **Description**: Name of funding organization
- **Format**: One of predefined values
- **Allowed Values**:
  - `Survival and Flourishing Fund`
  - `Open Philanthropy`
  - `Schmidt Sciences AI2050`
  - `Macroscopic`
  - `GiveWiki`
  - `Cooperative AI Foundation`
  - `Catalyze Impact`
  - `Other`
- **Example**: `Open Philanthropy`
- **Notes**: Use official organization name

### Optional Fields

#### recipient
- **Type**: String
- **Required**: No
- **Description**: Organization or individual receiving the grant
- **Format**: Free text
- **Example**: `Alignment Research Center`, `Jane Smith`
- **Notes**: Use official name as stated by funding source

#### category
- **Type**: String (Enum)
- **Required**: No
- **Description**: Primary category of grant focus
- **Format**: One of predefined values
- **Allowed Values**:
  - `AI Safety Research`
  - `AI Governance`
  - `Technical Alignment`
  - `Policy Research`
  - `Public Outreach`
  - `Infrastructure`
  - `Other`
- **Example**: `Technical Alignment`
- **Notes**: Choose most specific applicable category

#### description
- **Type**: String
- **Required**: No
- **Description**: Description of grant purpose or project
- **Format**: Free text, ASCII only
- **Example**: `Research on scalable oversight mechanisms for advanced AI systems`
- **Constraints**: ASCII characters only (0-127)
- **Notes**: Use source description if available

#### url
- **Type**: String
- **Required**: No
- **Description**: URL to grant announcement or details
- **Format**: Valid URI (http:// or https://)
- **Example**: `https://www.openphilanthropy.org/grants/arc-2024/`
- **Constraints**: Must be valid, accessible URL
- **Notes**: Prefer permanent links over blog posts

#### notes
- **Type**: String
- **Required**: No
- **Description**: Additional context or editorial notes
- **Format**: Free text, ASCII only
- **Example**: `Part of larger multi-year commitment`
- **Constraints**: ASCII characters only (0-127)
- **Notes**: For data curator notes, not from source

## Metadata Fields

These fields may be added during processing:

#### ingestion_timestamp
- **Type**: String
- **Description**: When data was ingested into raw zone
- **Format**: ISO 8601 with timezone (YYYY-MM-DDTHH:MM:SSZ)
- **Example**: `2025-10-30T14:23:45Z`
- **Added By**: Ingestion process

#### processing_timestamp
- **Type**: String
- **Description**: When data was last processed/transformed
- **Format**: ISO 8601 with timezone
- **Example**: `2025-10-30T14:25:12Z`
- **Added By**: Migration scripts

#### checksum
- **Type**: String
- **Description**: SHA-256 checksum of file content
- **Format**: 64 character hexadecimal
- **Example**: `a3b2c1d4e5f6...`
- **Added By**: File operations utilities

#### validation_status
- **Type**: String (Enum)
- **Description**: Result of validation
- **Allowed Values**: `passed`, `failed`, `warning`
- **Added By**: Validation scripts

## Data Quality Rules

### Required Field Validation

All required fields must:
- Be present in the record
- Not be null or empty string
- Meet format requirements

### Data Type Validation

- **Numbers**: Must parse as numeric values
- **Dates**: Must parse as valid ISO 8601 dates
- **URLs**: Must be valid URI format
- **Enums**: Must match allowed values exactly

### Business Logic Validation

- **Amount**: Cannot be negative
- **Date**: Cannot be in the future
- **Date**: Should not be before 2010 (AI safety funding era)
- **Grant ID**: Should be unique within source

### Data Quality Warnings

Non-fatal issues that generate warnings:
- Missing optional fields
- Unusual amount values (< $1,000 or > $10,000,000)
- Non-standard date formats (but parseable)
- Missing URLs for major grants

## Derived Fields

Fields calculated during transformation:

#### year
- **Type**: Integer
- **Description**: Year extracted from date field
- **Example**: `2024`
- **Derivation**: `YEAR(date)`

#### quarter
- **Type**: String
- **Description**: Fiscal quarter
- **Example**: `Q1`, `Q2`, `Q3`, `Q4`
- **Derivation**: Based on month from date

#### amount_category
- **Type**: String
- **Description**: Size category of grant
- **Values**: `small` (< $50K), `medium` ($50K-$250K), `large` (> $250K)
- **Derivation**: Bucketing of amount field

## Field Mapping by Source

Different sources may use different field names. Mapping:

### Survival & Flourishing Fund (SFF)
- Source field `Grant ID` -> `grant_id`
- Source field `Amount` -> `amount`
- Source field `Grantee` -> `recipient`

### Open Philanthropy
- Source field `Grant` -> `grant_id`
- Source field `Amount Awarded` -> `amount`
- Source field `Organization` -> `recipient`

### Schmidt Sciences AI2050
- Source field `Project ID` -> `grant_id`
- Source field `Funding` -> `amount`
- Source field `PI Organization` -> `recipient`

*Note: Add specific mappings as sources are integrated*

## Change Log

### Version 1.0 (2025-10-30)
- Initial schema definition
- Core funding fields established
- Validation rules defined

### Future Versions

When schema changes:
1. Document in this section
2. Update schema version in `config/schemas/`
3. Update validation scripts
4. Reprocess affected data if needed

## Examples

### Minimal Valid Record
```json
{
  "grant_id": "TEST-001",
  "amount": 50000,
  "date": "2024-01-15",
  "source": "Other"
}
```

### Complete Record
```json
{
  "grant_id": "OP-AI-2024-123",
  "amount": 125000,
  "date": "2024-03-15",
  "source": "Open Philanthropy",
  "recipient": "Alignment Research Center",
  "category": "Technical Alignment",
  "description": "Research on scalable oversight mechanisms for advanced AI systems",
  "url": "https://www.openphilanthropy.org/grants/arc-2024/",
  "notes": "Multi-year commitment, first installment"
}
```

## References

- JSON Schema: `config/schemas/funding_data_v1.json`
- Validation Script: `scripts/validation/validate_funding.py`
- Data Zones: `docs/DATA_ZONES.md`
